<!DOCTYPE html>
<html>
<head>
    <title>Rock, Paper, Scissors</title>
    <meta charset="UTF-8">
</head>
<body>
    <script>
        
        function computerPlay () {
            let random = (Math.floor(Math.random() * 3) + 1);     // random number from 1-3
            console.log(random);
            if (random == 1) {
                return 'rock'
            } else if (random == 2) {
                return 'paper'
            } else {
                return 'scissors'
            }
        }

        function playRound (playerSelection, computerSelection) {
            playerSelection = playerSelection.toLowerCase();
            if (playerSelection != 'rock' && playerSelection != 'paper' && playerSelection != 'scissors') {
            // if (playerSelection.match(/^(?!rock|paper|scissors)$/i)) {       // Regex asserting that it does not match rock, paper, or scissors
                return 'invalid'                                                // ?! is a negative look-ahead -- NEEDS DEBUGGING
            }
            if (playerSelection == computerSelection) {
                console.log("It's a tie!")
                return "tie"
            } else {
                if (computerSelection == 'rock') {
                    if (playerSelection == 'paper') {
                        console.log(`Congrats! You win the round. You picked ${playerSelection}. Paper beats rock.`);   // template literal
                        return true;
                    } else {
                        console.log("Too bad. You lost the round. Rock beats scissors.");
                        return false;
                    }
                } else if (computerSelection == 'paper') {
                    if (playerSelection == 'scissors') {
                        console.log("Congrats! You win the round. Scissors beats paper.");
                        return true;
                    } else {
                        console.log("Too bad. You lost the round. Paper beats rock.");
                        return false;
                    }
                } else {
                    if (playerSelection == 'rock') {
                        console.log("Congrats! You win the round. Rock beats scissors.");
                        return true;
                    } else {
                        console.log("Too bad. You lost the round. Scissors beats paper.");
                        return false;
                    }
                }
            }
        }
        
        function game() {
            let playerScore = 0;
            let computerScore = 0;
            for (i = 0; i < 5; i++) {
                let computerSelect = computerPlay();
                let playerSelect = prompt("Rock, paper, or scissors?");
                let result = playRound(playerSelect, computerSelect);
                playRound(playerSelect, computerSelect)
                // console.log(result)
                if (result == true) {
                    playerScore++;
                    console.log("Player score: " + playerScore + "\nComputer score: " + computerScore);
                } else if (result == false) {
                    computerScore++;
                    console.log("Player score: " + playerScore + "\nComputer score: " + computerScore);
                } else if (result == "tie") {
                    console.log("Player score: " + playerScore + "\nComputer score: " + computerScore);
                    continue;
                } else if (result == "invalid") {
                    let playerSelect = prompt("Invalid selection. Rock, paper, or scissors?")
                    playRound(playerSelect, computerSelect);
                    continue;
                }
            }
            console.log("Final player score is " + playerScore + ".")
            console.log("Final computer score is " + computerScore + ".")
        }

    </script>
</body>
</html>